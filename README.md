# peergine_manual_v1.28.0 {#peergine-manual-v1-28-0}

目录

介绍 2

1\. 关于Peergine 2

2\. Peergine的功能特性 2

[1) 全新的网络编程模式 2](export\fu_lu_1_ff1a_yang_li_cheng_xu\1_jian_dan_liao_tian_shi_ff08_xiang_xi_zhu_shi_ff0.md)

[2) 强大的对等通信功能 2](export\fu_lu_1_ff1a_yang_li_cheng_xu\1_jian_dan_liao_tian_shi_ff08_xiang_xi_zhu_shi_ff0.md#2)

[3) 自适应的网络互通机制 3](export\fu_lu_1_ff1a_yang_li_cheng_xu\1_jian_dan_liao_tian_shi_ff08_xiang_xi_zhu_shi_ff0.md#3)

[4) 控件提供丰富的辅助功能 3](export\jie_dian_gong_neng_lei_de_bian_cheng_can_80033a\11_pgclasslive_7c7b3a.md#4)

[5) 多种OS平台和软件形态 3](export\jie_shao\2_peerginede_gong_neng_te_xing.md#5-os)

[3\. 基于对象的多点通信会话 3](export\fu_lu_1_ff1a_yang_li_cheng_xu\1_jian_dan_liao_tian_shi_ff08_xiang_xi_zhu_shi_ff0.md#3)

[1) 概念 3](export\fu_lu_1_ff1a_yang_li_cheng_xu\1_jian_dan_liao_tian_shi_ff08_xiang_xi_zhu_shi_ff0.md)

[2) 同名通信对象 4](export\fu_lu_1_ff1a_yang_li_cheng_xu\1_jian_dan_liao_tian_shi_ff08_xiang_xi_zhu_shi_ff0.md#2)

[3) 通信范围控制 5](export\jie_shao\3_ji_yu_dui_xiang_de_duo_dian_tong_xin_hui_hua.md#3-0)

4\. 控件与应用程序的交互方式 5

[1) 系统概述 5](export\fu_lu_1_ff1a_yang_li_cheng_xu\1_jian_dan_liao_tian_shi_ff08_xiang_xi_zhu_shi_ff0.md)

2) 方式1： 6

3) 方式2： 7

4) 方式3： 7

5) 方式4： 8

6) 方式5： 8

7) 方式6： 9

8) 方式7： 9

9) 方式8： 10

10) 方式9： 10

5\. 常用的数据格式 10

1) 地址的格式 10

2) 时间的格式 11

3) 文件摘要的格式 11

4) 视频窗口的参数格式 11

[SDK的安装使用说明 11](export\sdkde_an_zhuang_shi_yong_shuo_ming\README.md)

[1\. Windows平台： 11](export\sdkde_an_zhuang_shi_yong_shuo_ming\1_windowsping_tai_ff1a.md)

[2\. Linux平台： 11](export\sdkde_an_zhuang_shi_yong_shuo_ming\2_linuxping_tai_ff1a.md)

[3\. Android平台： 12](export\sdkde_an_zhuang_shi_yong_shuo_ming\3_androidping_tai_ff1a.md)

[配置和运行中继服务器 12](export\xiu_gai_ji_lu_ff1a.md)

[1\. 关于 12](export\fu_lu_1_ff1a_yang_li_cheng_xu\1_jian_dan_liao_tian_shi_ff08_xiang_xi_zhu_shi_ff0.md)

[2\. 配置运行 12](export\fu_lu_1_ff1a_yang_li_cheng_xu\1_jian_dan_liao_tian_shi_ff08_xiang_xi_zhu_shi_ff0.md#2)

如何使用pgATX控件编程 13

1\. 使用控件的编程接口 13

[1) 初始化控件 13](export\fu_lu_1_ff1a_yang_li_cheng_xu\1_jian_dan_liao_tian_shi_ff08_xiang_xi_zhu_shi_ff0.md#1-0)

[2) 使用通信对象 14](export\fu_lu_1_ff1a_yang_li_cheng_xu\1_jian_dan_liao_tian_shi_ff08_xiang_xi_zhu_shi_ff0.md#2)

[3) 处理消息循环 14](export\fu_lu_1_ff1a_yang_li_cheng_xu\1_jian_dan_liao_tian_shi_ff08_xiang_xi_zhu_shi_ff0.md#3)

[4) 使用OML解析器 14](export\ru_he_shi_yong_pgatx_kong_jian_bian_cheng\1_shi_yong_kong_jian_de_bian_cheng_jie_kou.md#4-oml)

[5) 获取控件的窗口参数 14](export\jie_dian_gong_neng_lei_de_bian_cheng_can_80033a\11_pgclasslive_7c7b3a.md#5)

[6) 使用控件的辅助命令 15](export\jie_dian_gong_neng_lei_de_bian_cheng_can_80033a\11_pgclasslive_7c7b3a.md#6)

[7) 使用安全沙盒目录 15](export\jie_dian_gong_neng_lei_de_bian_cheng_can_80033a\11_pgclasslive_7c7b3a.md#7)

2\. 使用节点类(PG_CLASS_Peer) 15

1) 创建节点对象 15

[2) 简单的两点直接通信 16](export\fu_lu_1_ff1a_yang_li_cheng_xu\1_jian_dan_liao_tian_shi_ff08_xiang_xi_zhu_shi_ff0.md#2)

3) 登录、注销和地址解析 17

[4) 远程过程调用 17](export\jie_dian_gong_neng_lei_de_bian_cheng_can_80033a\11_pgclasslive_7c7b3a.md#4)

[5) 两点消息传输 17](export\jie_dian_gong_neng_lei_de_bian_cheng_can_80033a\11_pgclasslive_7c7b3a.md#5)

[6) 数据的签名和校验 17](export\jie_dian_gong_neng_lei_de_bian_cheng_can_80033a\11_pgclasslive_7c7b3a.md#6)

[7) 异常离线(掉线)的判断 18](export\jie_dian_gong_neng_lei_de_bian_cheng_can_80033a\11_pgclasslive_7c7b3a.md#7)

3\. 使用通信组类(PG_CLASS_Group) 19

[1) 手动控制成员 19](export\fu_lu_1_ff1a_yang_li_cheng_xu\1_jian_dan_liao_tian_shi_ff08_xiang_xi_zhu_shi_ff0.md)

[2) 自动控制成员 19](export\fu_lu_1_ff1a_yang_li_cheng_xu\1_jian_dan_liao_tian_shi_ff08_xiang_xi_zhu_shi_ff0.md#2)

[3) 邻近成员控制 20](export\fu_lu_1_ff1a_yang_li_cheng_xu\1_jian_dan_liao_tian_shi_ff08_xiang_xi_zhu_shi_ff0.md#3)

[4) 主成员控制 20](export\jie_dian_gong_neng_lei_de_bian_cheng_can_80033a\11_pgclasslive_7c7b3a.md#4)

4\. 使用消息传输类(PG_CLASS_Data) 20

[1) 多点消息传输 20](export\fu_lu_1_ff1a_yang_li_cheng_xu\1_jian_dan_liao_tian_shi_ff08_xiang_xi_zhu_shi_ff0.md)

5\. 使用文件传输类(PG_CLASS_File) 20

[1) 两点文件传输 20](export\fu_lu_1_ff1a_yang_li_cheng_xu\1_jian_dan_liao_tian_shi_ff08_xiang_xi_zhu_shi_ff0.md)

6\. 使用音频传输类(PG_CLASS_Audio) 21

[1) 两点模式 21](export\fu_lu_1_ff1a_yang_li_cheng_xu\1_jian_dan_liao_tian_shi_ff08_xiang_xi_zhu_shi_ff0.md)

[2) 会议模式及发言控制 21](export\fu_lu_1_ff1a_yang_li_cheng_xu\1_jian_dan_liao_tian_shi_ff08_xiang_xi_zhu_shi_ff0.md#2)

[3) 设置和获取音量 21](export\fu_lu_1_ff1a_yang_li_cheng_xu\1_jian_dan_liao_tian_shi_ff08_xiang_xi_zhu_shi_ff0.md#3)

[4) 实时显示音量的变化 21](export\jie_dian_gong_neng_lei_de_bian_cheng_can_80033a\11_pgclasslive_7c7b3a.md#4)

5) 音频录制 21

7\. 使用视频传输类(PG_CLASS_Video) 21

[1) 预览模式 21](export\fu_lu_1_ff1a_yang_li_cheng_xu\1_jian_dan_liao_tian_shi_ff08_xiang_xi_zhu_shi_ff0.md)

[2) 两点模式 21](export\fu_lu_1_ff1a_yang_li_cheng_xu\1_jian_dan_liao_tian_shi_ff08_xiang_xi_zhu_shi_ff0.md#2)

[3) 会议模式及视频的加入和离开 22](export\fu_lu_1_ff1a_yang_li_cheng_xu\1_jian_dan_liao_tian_shi_ff08_xiang_xi_zhu_shi_ff0.md#3)

[4) 视频窗口调整和转移 22](export\jie_dian_gong_neng_lei_de_bian_cheng_can_80033a\11_pgclasslive_7c7b3a.md#4)

[5) 拍照片 22](export\jie_dian_gong_neng_lei_de_bian_cheng_can_80033a\11_pgclasslive_7c7b3a.md#5)

6) 视频录制 22

8\. 使用白板共享类(PG_CLASS_Board) 22

[1) 设置绘制图形的参数 22](export\fu_lu_1_ff1a_yang_li_cheng_xu\1_jian_dan_liao_tian_shi_ff08_xiang_xi_zhu_shi_ff0.md)

[2) 设置绘制不同图形时的鼠标光标 22](export\fu_lu_1_ff1a_yang_li_cheng_xu\1_jian_dan_liao_tian_shi_ff08_xiang_xi_zhu_shi_ff0.md#2)

[3) 实现橡皮功能 22](export\fu_lu_1_ff1a_yang_li_cheng_xu\1_jian_dan_liao_tian_shi_ff08_xiang_xi_zhu_shi_ff0.md#3)

[4) 保存和载入文件 22](export\jie_dian_gong_neng_lei_de_bian_cheng_can_80033a\11_pgclasslive_7c7b3a.md#4)

9\. 使用文件分块共享类(PG_CLASS_Share) 23

[1) 顺序传输模式 23](export\fu_lu_1_ff1a_yang_li_cheng_xu\1_jian_dan_liao_tian_shi_ff08_xiang_xi_zhu_shi_ff0.md)

[2) 分散传输模式 23](export\fu_lu_1_ff1a_yang_li_cheng_xu\1_jian_dan_liao_tian_shi_ff08_xiang_xi_zhu_shi_ff0.md#2)

[3) 文件的存储和种子 23](export\fu_lu_1_ff1a_yang_li_cheng_xu\1_jian_dan_liao_tian_shi_ff08_xiang_xi_zhu_shi_ff0.md#3)

[4) 转发到本地HTTP服务器 23](export\ru_he_shi_yong_pgatx_kong_jian_bian_cheng\9_shi_yong_wen_jian_fen_kuai_gong_xiang_7c7b28_pg_.md#4-http)

10\. 使用数据表传输类(PG_CLASS_Table) 23

[1) 数据表传输 23](export\fu_lu_1_ff1a_yang_li_cheng_xu\1_jian_dan_liao_tian_shi_ff08_xiang_xi_zhu_shi_ff0.md)

[2) 文件传输模式 24](export\fu_lu_1_ff1a_yang_li_cheng_xu\1_jian_dan_liao_tian_shi_ff08_xiang_xi_zhu_shi_ff0.md#2)

[3) 强制同步传输 24](export\fu_lu_1_ff1a_yang_li_cheng_xu\1_jian_dan_liao_tian_shi_ff08_xiang_xi_zhu_shi_ff0.md#3)

11\. 使用媒体流直播类(PG_CLASS_Live) 24

[1) 媒体流的播放和收看 24](export\fu_lu_1_ff1a_yang_li_cheng_xu\1_jian_dan_liao_tian_shi_ff08_xiang_xi_zhu_shi_ff0.md)

[2) 媒体源的切换 24](export\fu_lu_1_ff1a_yang_li_cheng_xu\1_jian_dan_liao_tian_shi_ff08_xiang_xi_zhu_shi_ff0.md#2)

[3) 媒体流录制 24](export\fu_lu_1_ff1a_yang_li_cheng_xu\1_jian_dan_liao_tian_shi_ff08_xiang_xi_zhu_shi_ff0.md#3)

pgATX控件的编程参考： 25

1\. 控件的属性配置项: 25

1) Control 25

2) Node 25

3) Local 26

4) Server 26

5) Relay 27

6) Class 27

7) OnExtRequest 28

8) OnReply 28

2\. 控件的节点功能函数: 29

1) int ObjectAdd(sObject, sClass, sGroup, uFlag) 29

2) void ObjectDelete(sObject) 29

3) String ObjectGetClass(sObject) 30

4) int ObjectSetGroup(sObject, sGroup) 30

5) String ObjectGetGroup(sObject) 30

6) int ObjectSync(sObject, sPeer, uAction) 31

7) int ObjectRequest(sObject, uMeth, sIn, sParam) 31

8) int ObjectExtReply(sObject, uErr, sOut, uHandle) 32

9) String ObjectEnum(sObject, sClass) 32

[10) int PostMessage(sMsg) 33](export\pgatxkong_jian_de_bian_cheng_can_kao_ff1a\2_kong_jian_de_jie_dian_gong_neng_han_65703a.md#10-int-postmessage-smsg)

[11) int PumpMessage(uLoop) 33](export\pgatxkong_jian_de_bian_cheng_can_kao_ff1a\2_kong_jian_de_jie_dian_gong_neng_han_65703a.md#11-int-pumpmessage-uloop)

12) int Start(uOption) 33

[13) void Stop() 34](export\pgatxkong_jian_de_bian_cheng_can_kao_ff1a\2_kong_jian_de_jie_dian_gong_neng_han_65703a.md#13-void-stop)

3\. 控件的OML解析器函数: 34

1) String omlEncode(sEle) 34

2) String omlDecode(sEle) 35

3) String omlSetName(sEle, sPath, sName) 35

4) String omlSetClass(sEle, sPath, sClass) 35

5) String omlSetContent(sEle, sPath, sContent) 36

6) String omlNewEle(sName, sClass, sContent) 36

7) String omlGetEle(sEle, sPath, uSize, uPos) 36

8) String omlDeleteEle(sEle, sPath, uSize, uPos) 37

9) String omlGetName(sEle, sPath) 37

10) String omlGetClass(sEle, sPath) 38

11) String omlGetContent(sEle, sPath) 38

4\. 控件的辅助函数: 38

1) String utilGetWndRect() 38

2) String utilCmd(sCmd, sParam) 39

5\. 控件的命令列表: 39

1) PathGet 39

[2) FileList 39](export\pgatxkong_jian_de_bian_cheng_can_kao_ff1a\5_kong_jian_de_ming_ling_lie_88683a.md#2-filelist)

3) FileCopy 40

[4) FileMove 40](export\pgatxkong_jian_de_bian_cheng_can_kao_ff1a\5_kong_jian_de_ming_ling_lie_88683a.md#4-filemove)

5) FileInfo 40

6) FileClean 41

7) DlgFile 41

8) DlgDir 41

9) CacheAdd 42

10) CacheDelete 42

11) CacheSetDir 42

12) CacheGetInfo 43

13) CookieSet 43

14) CookieGet 43

15) CookieDelete 44

[16) ImageConvert 44](export\pgatxkong_jian_de_bian_cheng_can_kao_ff1a\5_kong_jian_de_ming_ling_lie_88683a.md#16-imageconvert)

17) HttpAdd 44

18) HttpDelete 45

19) HttpConfig 45

20) AviPlay 45

21) AviStop 45

22) AviGetInfo 46

[23) TrayIcon 46](export\pgatxkong_jian_de_bian_cheng_can_kao_ff1a\5_kong_jian_de_ming_ling_lie_88683a.md#23-trayicon)

[24) TracePopup 46](export\pgatxkong_jian_de_bian_cheng_can_kao_ff1a\5_kong_jian_de_ming_ling_lie_88683a.md#24-tracepopup)

25) CapScreen 47

[26) Setting 47](export\pgatxkong_jian_de_bian_cheng_can_kao_ff1a\5_kong_jian_de_ming_ling_lie_88683a.md#26-setting)

[27) Version 47](export\pgatxkong_jian_de_bian_cheng_can_kao_ff1a\5_kong_jian_de_ming_ling_lie_88683a.md#27-version)

[6\. 其他 48](export\jie_dian_gong_neng_lei_de_bian_cheng_can_80033a\11_pgclasslive_7c7b3a.md#6)

1) 错误码 48

节点功能类的编程参考: 50

1\. 类的通用选项和方法 50

[1) 描述： 50](export\fu_lu_1_ff1a_yang_li_cheng_xu\1_jian_dan_liao_tian_shi_ff08_xiang_xi_zhu_shi_ff0.md#1-0)

[2) 选项： 50](export\fu_lu_1_ff1a_yang_li_cheng_xu\1_jian_dan_liao_tian_shi_ff08_xiang_xi_zhu_shi_ff0.md#2)

[3) 方法： 50](export\fu_lu_1_ff1a_yang_li_cheng_xu\1_jian_dan_liao_tian_shi_ff08_xiang_xi_zhu_shi_ff0.md#3)

[2\. PG_CLASS_Peer类: 51](export\jie_dian_gong_neng_lei_de_bian_cheng_can_80033a\2_pgclasspeer_7c7b3a.md)

1) 描述： 51

2) 选项： 51

3) 方法： 52

[4) 扩展选项： 57](export\jie_dian_gong_neng_lei_de_bian_cheng_can_80033a\11_pgclasslive_7c7b3a.md#4)

5) P2P连接通道类型： 59

6) PG_METH_PEER_PushOption方法的选项： 61

3\. PG_CLASS_Group类: 61

1) 描述： 61

2) 选项： 61

3) 方法： 62

4) 扩展选项 63

4\. PG_CLASS_Data类: 63

1) 描述： 63

2) 选项： 63

3) 方法： 63

5\. PG_CLASS_File类: 64

1) 描述： 64

2) 选项： 64

3) 方法： 64

4) 常量：文件传输的状态 65

6\. PG_CLASS_Audio类: 65

1) 描述： 65

2) 选项： 65

3) 方法： 65

[4）扩展选项 65](export\jie_dian_gong_neng_lei_de_bian_cheng_can_80033a\11_pgclasslive_7c7b3a.md#4)

7\. PG_CLASS_Video类: 65

1) 描述： 65

2) 标志： 65

3) 方法： 65

4) 常量：视频捕捉的尺寸模式 65

[5）扩展选项 65](export\jie_dian_gong_neng_lei_de_bian_cheng_can_80033a\11_pgclasslive_7c7b3a.md#5)

[6) Android视频采集扩展选项说明 65](export\jie_dian_gong_neng_lei_de_bian_cheng_can_80033a\7_pgclassvideo_7c7b3a.md#6-android)

8\. PG_CLASS_Board类: 65

1) 描述： 65

2) 选项： 65

3) 方法： 65

4) 常量：图形的类型 65

9\. PG_CLASS_Share类: 65

1) 描述： 65

2) 选项： 65

3) 方法： 65

4) 常量：数据块的状态 65

10\. PG_CLASS_Table类: 65

1) 描述： 65

2) 选项： 65

3) 方法： 65

4) 常量：强制同步的动作 65

5) 常量：比较操作符 65

6) 说明：文件传输模式 65

11\. PG_CLASS_Live类: 65

1) 描述： 65

2) 选项： 65

[3) 方法： 65](export\fu_lu_1_ff1a_yang_li_cheng_xu\1_jian_dan_liao_tian_shi_ff08_xiang_xi_zhu_shi_ff0.md#3)

4) 常量：媒体流的类型 65

5) 常量：媒体流的控制动作 65

6) 说明：媒体流的初始化 65

[7）扩展选项 65](export\jie_dian_gong_neng_lei_de_bian_cheng_can_80033a\11_pgclasslive_7c7b3a.md#7)

对象标记语言(OML) 65

1\. 语法说明 65

2\. 样例 65

[附录1：样例程序 65](export\fu_lu_1_ff1a_yang_li_cheng_xu\1_jian_dan_liao_tian_shi_ff08_xiang_xi_zhu_shi_ff0.md)

1\. 简单聊天室（详细注释） 65

[1) 说明 65](export\fu_lu_1_ff1a_yang_li_cheng_xu\1_jian_dan_liao_tian_shi_ff08_xiang_xi_zhu_shi_ff0.md#1-0)

[2) 服务器程序 65](export\fu_lu_1_ff1a_yang_li_cheng_xu\1_jian_dan_liao_tian_shi_ff08_xiang_xi_zhu_shi_ff0.md#2)

[3) 客户端程序 65](export\fu_lu_1_ff1a_yang_li_cheng_xu\1_jian_dan_liao_tian_shi_ff08_xiang_xi_zhu_shi_ff0.md#3)

[修改记录： 65](export\xiu_gai_ji_lu_ff1a.md)

**Peergine编程手册**

**V 1.28.0**

**2017-05**

深圳市穿透科技有限公司

[http://www.peergine.com](http://www.peergine.com)